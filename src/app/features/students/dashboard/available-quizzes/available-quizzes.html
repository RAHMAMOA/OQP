<section>
    <h2 class="mb-6 text-2xl font-bold text-slate-800">Available Quizzes</h2>
    <div class="grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-[repeat(auto-fill,minmax(400px,1fr))]">
        @if (quizzes) {
            @for (quiz of quizzes; track quiz) {
            <div class="flex flex-col gap-4 rounded-[20px] bg-white p-8 shadow-[0_10px_15px_-3px_rgba(0,0,0,0.05)] transition-all hover:-translate-y-1 hover:shadow-[0_20px_25px_-5px_rgba(0,0,0,0.1)]">
                <div class="flex items-start justify-between">
                    <h3 class="text-xl font-bold text-slate-900">{{quiz.title}}</h3>
                    <div class="flex items-center gap-2">
                        <span [class]="getResultFlagColor(quiz.id).class"
                              class="rounded-md px-2.5 py-1 text-[13px] font-bold">
                            <svg class="w-3 h-3 inline mr-1" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M3 6a3 3 0 013-3h10a1 1 0 01.8 1.6L14.25 8l2.55 3.4A1 1 0 0116 13H6a1 1 0 00-1 1v3a1 1 0 11-2 0V6z" clip-rule="evenodd"></path>
                            </svg>
                            {{getResultFlagColor(quiz.id).text}}
                        </span>
                        @if (!hasUserTakenQuiz(quiz.id)) {
                        <span class="rounded-md px-2.5 py-1 text-[13px] font-bold bg-blue-50 text-blue-600">
                            New
                        </span>
                        }
                    </div>
                </div>
                <p class="m-0 text-[15px] leading-relaxed text-slate-500">{{quiz.description}}</p>
                <div class="mt-2 flex items-center justify-between">
                    <div class="flex gap-4">
                        <span class="flex items-center gap-1.5 text-sm font-medium text-slate-400">
                            <svg viewBox="0 0 24 24" class="h-3.5 w-3.5 fill-none stroke-current">
                                <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                                <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                            </svg>
                            {{quiz.questionCount}} Q
                        </span>
                        <span class="flex items-center gap-1.5 text-sm font-medium text-slate-400">
                            <svg viewBox="0 0 24 24" class="h-3.5 w-3.5 fill-none stroke-current">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polyline points="12 6 12 12 16 14"></polyline>
                            </svg>
                            {{quiz.time}}m
                        </span>
                    </div>
                    @if (getQuizButtonState(quiz.id); as buttonState) {
                    <ng-container>
                        @if (buttonState.canTake) {
                        <button 
                                routerLink="/quiz/{{quiz.id}}"
                                class="flex items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-4 py-2 text-sm font-semibold text-slate-500 transition-colors hover:bg-slate-100 cursor-pointer">
                            <svg viewBox="0 0 24 24" class="h-3.5 w-3.5 fill-none stroke-current">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                            Start Quiz
                        </button>
                        }
                        @if (buttonState.showCompleted) {
                        <button 
                                disabled
                                class="flex items-center gap-2 rounded-full border border-red-200 bg-red-50 px-4 py-2 text-sm font-semibold text-red-500 cursor-not-allowed">
                            <svg viewBox="0 0 24 24" class="h-3.5 w-3.5 fill-none stroke-current">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                <path d="M7 11V7a5 5 0 0110 0v4"></path>
                            </svg>
                            Completed
                        </button>
                        }
                    </ng-container>
                    }
                </div>
            </div>
            }
        }
    </div>
</section>
