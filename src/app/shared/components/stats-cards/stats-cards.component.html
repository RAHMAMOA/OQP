<div class="grid gap-6" [ngClass]="{
  'grid-cols-1': columns === 1,
  'grid-cols-2': columns === 2,
  'grid-cols-3': columns === 3,
  'grid-cols-4': columns === 4,
  'md:grid-cols-2': columns >= 2,
  'lg:grid-cols-3': columns >= 3,
  'xl:grid-cols-4': columns === 4
}">
  @for (stat of stats; track stat.label) {
  <div 
       class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex items-center space-x-5 hover:shadow-md transition-shadow">
    <div class="w-12 h-12 rounded-xl flex items-center justify-center shadow-sm" 
         [ngClass]="stat.color || 'bg-blue-100 text-blue-6'">
      <!-- Icon based on string name or custom icon -->
      <ng-container [ngSwitch]="stat.icon">
        <!-- Book icon -->
        @if (stat.icon === 'book') {
        <svg viewBox="0 0 24 24" class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
          <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
        </svg>
        }
        
        <!-- History icon -->
        @if (stat.icon === 'history') {
        <svg viewBox="0 0 24 24" class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
        }
        
        <!-- Trending up icon -->
        @if (stat.icon === 'trending-up') {
        <svg viewBox="0 0 24 24" class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
          <polyline points="17 6 23 6 23 12"></polyline>
        </svg>
        }
        
        <!-- Users icon -->
        @if (stat.icon === 'users') {
        <svg viewBox="0 0 24 24" class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
          <circle cx="9" cy="7" r="4"></circle>
          <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
          <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
        </svg>
        }
        
        <!-- Quiz icon (using help-circle for better representation) -->
        @if (stat.icon === 'quiz') {
        <svg viewBox="0 0 24 24" class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
          <line x1="12" y1="17" x2="12.01" y2="17"></line>
        </svg>
        }

        <!-- Clock icon for Total Attempts -->
        @if (stat.icon === 'attempts') {
        <svg viewBox="0 0 24 24" class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
        }

        <!-- Chart bar icon for analytics -->
        @if (stat.icon === 'chart') {
        <svg viewBox="0 0 24 24" class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="12" y1="20" x2="12" y2="10"></line>
          <line x1="18" y1="20" x2="18" y2="4"></line>
          <line x1="6" y1="20" x2="6" y2="16"></line>
        </svg>
        }

        <!-- Award icon for achievements -->
        @if (stat.icon === 'award') {
        <svg viewBox="0 0 24 24" class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="8" r="7"></circle>
          <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>
        </svg>
        }

        <!-- Target icon for goals -->
        @if (stat.icon === 'target') {
        <svg viewBox="0 0 24 24" class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <circle cx="12" cy="12" r="6"></circle>
          <circle cx="12" cy="12" r="2"></circle>
        </svg>
        }
        
        <!-- Default icon (question mark) -->
        @if (stat.icon !== 'book' && stat.icon !== 'history' && stat.icon !== 'trending-up' && stat.icon !== 'users' && stat.icon !== 'quiz' && stat.icon !== 'attempts' && stat.icon !== 'chart' && stat.icon !== 'award' && stat.icon !== 'target') {
        <svg viewBox="0 0 24 24" class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
          <line x1="12" y1="17" x2="12.01" y2="17"></line>
        </svg>
        }
      </ng-container>
    </div>
    
    <div class="flex-1">
      <div class="text-2xl font-bold text-gray-900 leading-none">
        {{ stat.value }}
        @if (showTrends && stat.trend) {
        <span 
              class="ml-2 text-sm font-medium" 
              [ngClass]="getTrendClass(stat.trend)">
          {{ getTrendIcon(stat.trend) }}
        </span>
        }
      </div>
      <div class="text-sm font-medium text-gray-500 mt-1">{{ stat.label }}</div>
    </div>
  </div>
  }
</div>
